var _=function(l){"use strict";function y(o){const i=[];let t=o;for(;t&&t.nodeType===Node.ELEMENT_NODE&&i.length<5;){const e=t.id,r=t.getAttribute("name"),n=t.tagName.toLowerCase();if(e){i.unshift(`${n}#${CSS.escape(e)}`);break}let a=n;r&&(a+=`[name="${CSS.escape(r)}"]`);const f=t.parentElement;if(f){const p=Array.from(f.children).filter(c=>c.tagName===t.tagName);if(p.length>1){const c=p.indexOf(t)+1;a+=`:nth-of-type(${c})`}}i.unshift(a),t=t.parentElement}return i.join(" > ")}function m(o){const i=e=>{var r;return Array.from(((r=e.parentNode)==null?void 0:r.childNodes)||[]).filter(n=>n.nodeType===1&&n.tagName===e.tagName).indexOf(e)+1},t=[];for(let e=o;e&&e.nodeType===1;e=e.parentElement){const r=e.id;if(r){t.unshift(`//*[@id='${r}']`);break}const n=i(e);t.unshift(`${e.tagName.toLowerCase()}[${n}]`)}return"/"+t.join("/")}function g(o){var r,n;const i=o.id;if(i){const a=document.querySelector(`label[for="${CSS.escape(i)}"]`);if(a)return((r=a.textContent)==null?void 0:r.trim())||""}const t=o.closest("label");if(t)return((n=t.textContent)==null?void 0:n.trim())||"";let e=o.previousSibling;for(;e;){if(e.nodeType===Node.TEXT_NODE){const a=(e.textContent||"").trim();if(a)return a}e=e.previousSibling}return""}function h(o){const i=o.getBoundingClientRect();return{x:i.x,y:i.y,width:i.width,height:i.height}}function s(){return{inputs:Array.from(document.querySelectorAll("input, select, textarea")).map(t=>{const e=t;return{tag:t.tagName.toLowerCase(),type:e.type,selector:y(t),xpath:m(t),labelText:g(t),placeholder:e.placeholder,ariaLabel:e.getAttribute("aria-label")||void 0,name:e.name||void 0,id:e.id||void 0,rect:h(t)}})}}function u(o){for(const[i,t]of Object.entries(o)){const e=document.querySelector(i);if(!e)continue;if(e.tagName.toLowerCase()==="select"){const n=Array.from(e.options).find(a=>a.value===t||a.text===t);n&&(e.value=n.value)}else e.value=t,e.dispatchEvent(new Event("input",{bubbles:!0})),e.dispatchEvent(new Event("change",{bubbles:!0}))}}function d(o){var i;for(const[t,e]of Object.entries(o)){const r=document.querySelector(t);if(!r)continue;const n=document.createElement("span");n.textContent="âœ“",n.style.position="absolute",n.style.background="#16a34a",n.style.color="white",n.style.borderRadius="9999px",n.style.fontSize="12px",n.style.lineHeight="12px",n.style.width="16px",n.style.height="16px",n.style.display="inline-flex",n.style.alignItems="center",n.style.justifyContent="center",n.style.transform="translate(8px, -8px)",n.title=`Confidence: ${(e.confidence*100).toFixed(0)}%`;const a=document.createElement("div");a.style.position="relative",(i=r.parentElement)==null||i.insertBefore(a,r),a.appendChild(r),a.appendChild(n)}}return chrome.runtime.onMessage.addListener((o,i,t)=>{o.type==="PING"&&t({ok:!0}),o.type==="SCAN_PAGE"&&t(s()),o.type==="FILL_FIELDS"&&(u(o.payload.mapping),t({ok:!0})),o.type==="OVERLAY_BADGES"&&(d(o.payload),t({ok:!0}))}),l.fillFields=u,l.overlayBadges=d,l.scanPage=s,Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),l}({});
